<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIOM Live Projects SOP - Interactive Document</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #991b1b; border-radius: 4px; } /* Red scrollbar */
        ::-webkit-scrollbar-thumb:hover { background: #7f1d1d; }

        /* Print Styles */
        @media print {
            body * { visibility: hidden; }
            #document-canvas, #document-canvas * { visibility: visible; }
            #document-canvas {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                background: white;
                height: auto;
                overflow: visible;
            }
            .no-print { display: none !important; }
            .print-break-inside { page-break-inside: avoid; }
        }

        /* Checkbox Transitions */
        .checklist-item { transition: all 0.2s ease; cursor: pointer; }
        .checklist-box { transition: all 0.2s ease; }
        
        /* Logo sizing */
        .logo-img { max-height: 80px; width: auto; object-fit: contain; }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 h-screen overflow-hidden flex">

    <!-- Sidebar -->
    <aside id="sidebar" class="w-72 bg-white border-r flex-shrink-0 transition-all duration-300 flex flex-col h-full absolute md:relative z-20 transform -translate-x-full md:translate-x-0 border-r-red-100">
        <!-- Changed to Red-900 -->
        <div class="p-4 border-b flex items-center justify-between bg-red-900 text-white h-16">
            <div class="font-bold text-lg tracking-tight">SIOM Live Projects</div>
            <button onclick="toggleSidebar()" class="md:hidden text-white hover:text-gray-200">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        
        <div class="p-4 border-b bg-gray-50">
            <label class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block">Highlight Role</label>
            <div class="relative">
                <select id="role-selector" onchange="updateRole()" class="w-full pl-9 pr-4 py-2 bg-white border border-gray-200 rounded shadow-sm appearance-none focus:outline-none focus:ring-2 focus:ring-red-500 text-sm">
                    <option value="All">All Roles</option>
                    <option value="SCC">SCC Member</option>
                    <option value="Faculty">Faculty Incharge</option>
                    <option value="Students">Student</option>
                    <option value="Academic Dept">Academic Dept</option>
                </select>
                <i data-lucide="user" class="absolute left-3 top-2.5 text-gray-400 w-4 h-4"></i>
                <i data-lucide="chevron-down" class="absolute right-3 top-2.5 text-gray-400 w-4 h-4"></i>
            </div>
        </div>

        <nav id="nav-links" class="flex-1 overflow-y-auto p-4 space-y-1">
            <!-- Navigation items will be injected here via JS -->
        </nav>

        <div class="p-4 border-t text-xs text-gray-400 text-center">
            SIOM Live Projects SOP v2.1
        </div>
    </aside>

    <!-- Overlay for mobile sidebar -->
    <div id="sidebar-overlay" onclick="toggleSidebar()" class="fixed inset-0 bg-black bg-opacity-50 z-10 hidden md:hidden"></div>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col min-w-0 h-full relative">
        
        <!-- Top Toolbar -->
        <header class="bg-white border-b h-16 flex items-center justify-between px-6 shadow-sm z-10 flex-shrink-0 border-b-red-100">
            <div class="flex items-center space-x-4">
                <button onclick="toggleSidebar()" class="md:hidden text-gray-500 hover:text-gray-700">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
                <div class="flex items-center text-gray-900 font-semibold text-lg">
                    <i data-lucide="file-text" class="mr-2 text-red-700 w-5 h-5"></i>
                    <span class="hidden sm:inline">Live Projects SOP</span>
                    <span class="sm:hidden">SOP</span>
                </div>
                <!-- Changed badge to Red/Gray theme -->
                <span class="px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 border border-red-200 hidden sm:inline-block">
                    Live Document
                </span>
            </div>

            <div class="flex items-center space-x-3">
                <div class="relative hidden md:block">
                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"></i>
                    <input 
                        type="text" 
                        id="search-input"
                        placeholder="Search document..." 
                        class="pl-9 pr-4 py-1.5 border border-gray-300 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-red-500 w-48 lg:w-64 transition-all"
                        oninput="handleSearch()"
                    >
                </div>
                <div class="h-6 w-px bg-gray-300 mx-2 hidden sm:block"></div>
                <button onclick="window.print()" class="text-gray-500 hover:text-red-700 p-2 rounded-full hover:bg-gray-100 transition-colors" title="Print">
                    <i data-lucide="printer" class="w-5 h-5"></i>
                </button>
                <!-- Changed Export button to Black/Red hover -->
                <button onclick="exportToText()" class="bg-black hover:bg-red-800 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center shadow-sm transition-colors hidden sm:flex">
                    <i data-lucide="download" class="w-4 h-4 mr-2"></i> Export
                </button>
            </div>
        </header>

        <!-- Document Canvas -->
        <main id="document-canvas" class="flex-1 overflow-y-auto bg-gray-50 p-4 md:p-8 relative">
            <div class="max-w-4xl mx-auto bg-white shadow-lg min-h-screen rounded-lg pb-12 border-t-4 border-red-800">
                
                <!-- Doc Header with Logos -->
                <div class="px-8 md:px-12 py-8 border-b border-gray-200">
                    <!-- Logos Row -->
                    <div class="flex justify-between items-center mb-8 pb-4 border-b border-gray-100">
                        <img src="1.png" alt="SIOM Logo" class="logo-img h-16 md:h-20" onerror="this.src='https://via.placeholder.com/150x80?text=SIOM+Logo'">
                        <img src=" Logo.png" alt="SCC Logo" class="logo-img h-14 md:h-16" onerror="this.src='https://via.placeholder.com/100x80?text=SCC+Logo'">
                    </div>

                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 tracking-tight">SIOM Live Projects</h1>
                            <h2 class="text-xl text-red-700 mt-2 font-medium">Standard Operating Procedure</h2>
                        </div>
                        <div class="text-right hidden sm:block">
                            <div class="font-bold text-gray-900">SIOM Nashik</div>
                            <div class="text-sm text-gray-500">Students' Consulting Committee</div>
                        </div>
                    </div>
                    
                    <!-- Timeline Widget (Visible only on Intro) -->
                    <div id="timeline-container" class="hidden mt-8">
                        <!-- Injected by JS -->
                    </div>
                </div>

                <!-- Doc Content -->
                <div id="content-area" class="px-8 md:px-12 py-8">
                    <!-- Dynamic Content Injected Here -->
                </div>

            </div>
            
            <div class="max-w-4xl mx-auto mt-6 text-center text-gray-400 text-sm no-print mb-8">
                <p>Â© 2025 Symbiosis Institute of Operations Management. Confidential Internal Document.</p>
            </div>
        </main>

    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- DATA STRUCTURE ---
        const sopData = [
            {
                id: '1',
                title: '1. Introduction',
                roles: ['All'],
                content: `
                    <div class="space-y-4">
                        <div class="bg-gray-50 border-l-4 border-red-800 p-4 mb-4">
                            <h3 class="font-bold text-red-900">Document Control</h3>
                            <p class="text-sm text-gray-700">Version 2.1 | Last Updated: December 2025 | Owner: Students' Consulting Committee</p>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">1.1 What are Live Projects?</h3>
                        <p class="text-gray-700 leading-relaxed">
                            Live projects in an MBA at SIOM are akin to <strong>part-time internships</strong> (distinct from full-time internships) where students work on real, ongoing company projects while enrolled in their coursework for a duration of <strong>2 weeks</strong>.
                        </p>
                        <p class="text-gray-700 leading-relaxed mt-2">
                            These projects provide hands-on experience by applying classroom theory to real-world business challenges. Students often work on domains such as:
                        </p>
                        <ul class="list-disc pl-5 mt-2 space-y-1 text-gray-700 bg-red-50 p-4 rounded-md border border-red-100">
                            <li><strong>Warehouse Optimisation</strong></li>
                            <li><strong>Demand Forecasting</strong></li>
                            <li><strong>Logistics Route Planning</strong></li>
                            <li><strong>Inventory Management</strong> (ABC analysis, Safety Stock)</li>
                            <li><strong>Sustainability Tracking</strong></li>
                        </ul>
                        <p class="text-gray-700 leading-relaxed mt-2">
                            Projects frequently utilize technologies like <strong>Power BI, AI, or ERP systems</strong> to improve efficiency, reduce costs, and manage risks across industries ranging from manufacturing to retail.
                        </p>
                    </div>
                `
            },
            {
                id: '2',
                title: '2. Definitions & Backgrounds',
                roles: ['SCC', 'Faculty'],
                content: `
                    <div class="space-y-4">
                        <h3 class="text-xl font-bold text-gray-900">2.1 Student Profiles</h3>
                        <p class="text-gray-700">To ensure balanced teams, students are categorized based on their work experience and undergraduate engineering background.</p>
                        
                        <div class="grid grid-cols-1 gap-6 mt-4">
                            
                            <!-- Fresher Definition -->
                            <div class="border-l-4 border-black pl-4">
                                <h4 class="font-bold text-gray-900">Fresher</h4>
                                <p class="text-sm text-gray-600">Students with <strong>less than 12 months</strong> of work experience.</p>
                            </div>

                            <!-- Core Definition -->
                            <div class="bg-white border rounded-lg p-4 shadow-sm border-l-4 border-l-red-700">
                                <h4 class="font-bold text-red-900 border-b pb-2 mb-2 border-red-100">Core Engineering Backgrounds</h4>
                                <p class="text-sm text-gray-500 mb-3 italic">Direct overlap with Operations & SCM principles.</p>
                                <ul class="space-y-3 text-sm text-gray-700">
                                    <li><strong>Industrial Engineering:</strong> The most "core" background, focusing on optimization of complex processes and systems.</li>
                                    <li><strong>Mechanical Engineering:</strong> Rigorous knowledge of manufacturing processes, product design, and production systems.</li>
                                    <li><strong>Production/Manufacturing Engineering:</strong> Centered on efficiency, lean manufacturing, and quality control.</li>
                                    <li><strong>Systems Engineering:</strong> Design and management of complex systems over life cycles.</li>
                                </ul>
                            </div>

                            <!-- Non-Core Definition -->
                            <div class="bg-white border rounded-lg p-4 shadow-sm border-l-4 border-l-gray-500">
                                <h4 class="font-bold text-gray-800 border-b pb-2 mb-2 border-gray-200">Non-Core Engineering Backgrounds</h4>
                                <p class="text-sm text-gray-500 mb-3 italic">Valuable for analytical rigor but less direct overlap with physical SCM.</p>
                                <ul class="space-y-3 text-sm text-gray-700">
                                    <li><strong>CS / Software / IT:</strong> Focus on information flow, analytics, and ERP systems rather than physical goods.</li>
                                    <li><strong>Civil Engineering:</strong> Strong project management skills, relevant to infrastructure/construction but less to general manufacturing.</li>
                                    <li><strong>Electrical/Electronics:</strong> Less directly linked to process optimization in a general SCM context.</li>
                                    <li><strong>Chemical Engineering:</strong> Highly specialized; relevant mostly in chemical supply chains.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: '3',
                title: '3. Process Overview',
                roles: ['All'],
                content: `
                    <div class="space-y-4">
                        <p class="text-gray-700">The Live Projects lifecycle follows a linear 6-phase approach designed to match student skills with company needs efficiently.</p>
                        <div class="flex flex-col space-y-2 mt-4">
                            <div class="flex items-center p-3 bg-white shadow-sm rounded border-l-4 border-red-600">
                                <span class="font-bold w-24 text-red-800">Phase 1</span>
                                <span class="text-gray-800">Company Scouting & Onboarding (Nashik)</span>
                            </div>
                            <div class="flex items-center p-3 bg-white shadow-sm rounded border-l-4 border-red-600">
                                <span class="font-bold w-24 text-red-800">Phase 2</span>
                                <span class="text-gray-800">Student Interest & Registration</span>
                            </div>
                            <div class="flex items-center p-3 bg-white shadow-sm rounded border-l-4 border-red-600">
                                <span class="font-bold w-24 text-red-800">Phase 3</span>
                                <span class="text-gray-800">Faculty Interviews</span>
                            </div>
                            <div class="flex items-center p-3 bg-white shadow-sm rounded border-l-4 border-red-600">
                                <span class="font-bold w-24 text-red-800">Phase 4</span>
                                <span class="text-gray-800">Selection & Ranking (Marks + Profile)</span>
                            </div>
                            <div class="flex items-center p-3 bg-white shadow-sm rounded border-l-4 border-red-600">
                                <span class="font-bold w-24 text-red-800">Phase 5</span>
                                <span class="text-gray-800">Project Assignment</span>
                            </div>
                            <div class="flex items-center p-3 bg-white shadow-sm rounded border-l-4 border-red-600">
                                <span class="font-bold w-24 text-red-800">Phase 6</span>
                                <span class="text-gray-800">Handover to Academic Dept</span>
                            </div>
                        </div>
                    </div>
                `
            },
            {
                id: '4',
                title: '4. Phase 1: Company Scouting',
                roles: ['SCC', 'Faculty'],
                content: `
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2 text-sm font-semibold text-gray-500 uppercase tracking-wider">
                            <i data-lucide="clock" class="w-4 h-4 text-red-600"></i>
                            <span>Duration: Weeks 1-2</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">4.1 Objective</h3>
                        <p class="text-gray-700">Scout projects specifically in <strong>Nashik</strong> and onboard companies via formal Charter processes.</p>
                        
                        <div class="bg-white border border-gray-200 rounded-lg p-4 mt-4 shadow-sm print-break-inside">
                            <h4 class="font-bold border-b border-gray-200 pb-2 mb-2 flex items-center text-gray-900">
                                <i data-lucide="check-square" class="mr-2 text-red-600 w-5 h-5"></i> Phase 1 Checklist
                            </h4>
                            <ul class="space-y-2 checklist-container">
                                <li data-task="p1-t1">Scout companies in Nashik region</li>
                                <li data-task="p1-t2">Send <strong>Blank Project Charter</strong> to interested companies</li>
                                <li data-task="p1-t3">Company fills Charter OR SCC fills and Company confirms via mail</li>
                                <li data-task="p1-t4">Receive final "Thumbs Up" / Confirmation from Company</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            {
                id: '5',
                title: '5. Phase 2: Student Registration',
                roles: ['SCC', 'Students'],
                content: `
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2 text-sm font-semibold text-gray-500 uppercase tracking-wider">
                            <i data-lucide="clock" class="w-4 h-4 text-red-600"></i>
                            <span>Duration: Week 3</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">5.1 Objective</h3>
                        <p class="text-gray-700">Float forms to collect student willingness/keenness. Stop accepting responses once the required cap is reached.</p>

                         <div class="bg-red-50 border-l-4 border-red-600 p-4 my-4">
                            <h4 class="font-bold text-red-900 flex items-center">
                                <i data-lucide="alert-circle" class="mr-2 w-5 h-5"></i> Process Rule
                            </h4>
                            <p class="text-sm text-red-800 mt-1">
                                Forms are floated at the beginning. Once the cap for the number of students to be placed (Max 3-4 per project) is reached or exceeded by a safe margin, stop floating forms.
                            </p>
                        </div>

                        <div class="bg-white border border-gray-200 rounded-lg p-4 mt-4 shadow-sm print-break-inside">
                           <h4 class="font-bold border-b border-gray-200 pb-2 mb-2 flex items-center text-gray-900">
                                <i data-lucide="check-square" class="mr-2 text-red-600 w-5 h-5"></i> Phase 2 Checklist
                           </h4>
                           <ul class="space-y-2 checklist-container">
                                <li data-task="p2-t1">Float Interest/Willingness Form to students</li>
                                <li data-task="p2-t2">Monitor response count against project capacity</li>
                                <li data-task="p2-t3">Stop accepting responses/Close form</li>
                                <li data-task="p2-t4">Compile list of interested candidates</li>
                           </ul>
                        </div>
                    </div>
                `
            },
            {
                id: '6',
                title: '6. Phase 3: Interviews',
                roles: ['Faculty', 'SCC'],
                content: `
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2 text-sm font-semibold text-gray-500 uppercase tracking-wider">
                            <i data-lucide="clock" class="w-4 h-4 text-red-600"></i>
                            <span>Duration: Week 4</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">6.1 Faculty Interviews</h3>
                        <p class="text-gray-700">
                            Conduct <strong>one general interview</strong> for all interested students. This interview is conducted by the <strong>teaching faculties of SIOM</strong> to assess suitability.
                        </p>

                        <div class="bg-white border border-gray-200 rounded-lg p-4 mt-6 shadow-sm print-break-inside">
                           <h4 class="font-bold border-b border-gray-200 pb-2 mb-2 flex items-center text-gray-900">
                                <i data-lucide="check-square" class="mr-2 text-red-600 w-5 h-5"></i> Phase 3 Checklist
                           </h4>
                           <ul class="space-y-2 checklist-container">
                                <li data-task="p3-t1">Schedule General Interview with SIOM Faculty</li>
                                <li data-task="p3-t2">Notify interested students of schedule</li>
                                <li data-task="p3-t3">Conduct interviews</li>
                                <li data-task="p3-t4">Compile interview scores/clearance status</li>
                           </ul>
                        </div>
                    </div>
                `
            },
            {
                id: '7',
                title: '7. Phase 4: Selection & Ranking',
                roles: ['SCC', 'Faculty'],
                content: `
                    <div class="space-y-4">
                        <div class="flex items-center space-x-2 text-sm font-semibold text-gray-500 uppercase tracking-wider">
                            <i data-lucide="clock" class="w-4 h-4 text-red-600"></i>
                            <span>Duration: Week 4-5</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">7.1 Segregation Logic</h3>
                        <p class="text-gray-700">Once interviews are done, segregate candidates based on the following hierarchy:</p>
                        
                        <ol class="list-decimal pl-5 space-y-2 text-gray-700 bg-white p-4 border rounded-lg">
                            <li><strong>Marks:</strong> Sort top scorers first.</li>
                            <li><strong>Profile:</strong> Categorize into Fresher, Non-Core, and Core.</li>
                            <li><strong>Requirements:</strong> Match against specific company requirements.</li>
                        </ol>

                        <h3 class="text-xl font-bold text-gray-900 mt-4">7.2 Final Selection Strategy</h3>
                        <p class="text-gray-700">
                            Select the top <strong>n (mostly 50-55)</strong> students from the sorted list.
                        </p>
                        <div class="bg-black text-white p-4 border-l-4 border-red-600 mt-2 rounded-r">
                            <p class="text-sm font-semibold">
                                "Preference is given to keeping the number of Freshers, Non-Core, and Core students EQUAL."
                            </p>
                        </div>

                        <div class="bg-white border border-gray-200 rounded-lg p-4 mt-6 shadow-sm print-break-inside">
                           <h4 class="font-bold border-b border-gray-200 pb-2 mb-2 flex items-center text-gray-900">
                                <i data-lucide="check-square" class="mr-2 text-red-600 w-5 h-5"></i> Phase 4 Checklist
                           </h4>
                           <ul class="space-y-2 checklist-container">
                                <li data-task="p4-t1">Sort students by Marks</li>
                                <li data-task="p4-t2">Segregate by Profile (Fresher/Core/Non-Core)</li>
                                <li data-task="p4-t3">Apply "Equal Distribution" logic</li>
                                <li data-task="p4-t4">Finalize Top 50-55 list</li>
                           </ul>
                        </div>
                    </div>
                `
            },
            {
                id: '8',
                title: '8. Phase 5: Project Assignment',
                roles: ['SCC', 'Faculty', 'Students'],
                content: `
                    <div class="space-y-4">
                         <div class="flex items-center space-x-2 text-sm font-semibold text-gray-500 uppercase tracking-wider">
                            <i data-lucide="clock" class="w-4 h-4 text-red-600"></i>
                            <span>Duration: Week 5</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">8.1 Placement</h3>
                        <p class="text-gray-700">Place the selected students into projects according to Company Requirements and Student Preferences (where applicable).</p>
                        <p class="text-sm text-gray-500">Note: One company can have multiple projects. Each project typically takes 3-4 students.</p>

                        <div class="bg-white border border-gray-200 rounded-lg p-4 mt-6 shadow-sm print-break-inside">
                           <h4 class="font-bold border-b border-gray-200 pb-2 mb-2 flex items-center text-gray-900">
                                <i data-lucide="check-square" class="mr-2 text-red-600 w-5 h-5"></i> Phase 5 Checklist
                           </h4>
                           <ul class="space-y-2 checklist-container">
                                <li data-task="p5-t1">Map selected students to Company Projects</li>
                                <li data-task="p5-t2">Ensure team composition meets company needs</li>
                                <li data-task="p5-t3">Verify assignments against capacity (max 3-4 per project)</li>
                           </ul>
                        </div>
                    </div>
                `
            },
            {
                id: '9',
                title: '9. Phase 6: Handover',
                roles: ['SCC', 'Faculty', 'Academic Dept'],
                content: `
                    <div class="space-y-4">
                         <div class="flex items-center space-x-2 text-sm font-semibold text-gray-500 uppercase tracking-wider">
                            <i data-lucide="clock" class="w-4 h-4 text-red-600"></i>
                            <span>Duration: Week 6</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-900">9.1 Submission</h3>
                        <p class="text-gray-700">Once placement is finalized, the entire list of selected students and their assigned projects must be provided to the Faculty Incharge and the Academic Department.</p>

                        <div class="bg-white border border-gray-200 rounded-lg p-4 mt-6 shadow-sm print-break-inside">
                           <h4 class="font-bold border-b border-gray-200 pb-2 mb-2 flex items-center text-gray-900">
                                <i data-lucide="check-square" class="mr-2 text-red-600 w-5 h-5"></i> Phase 6 Checklist
                           </h4>
                           <ul class="space-y-2 checklist-container">
                                <li data-task="p6-t1">Compile Final Placement List</li>
                                <li data-task="p6-t2">Submit list to Faculty Incharge</li>
                                <li data-task="p6-t3">Submit list to Academic Department</li>
                           </ul>
                        </div>
                    </div>
                `
            },
            {
                id: '10',
                title: '10. Academic Integration (PBL)',
                roles: ['Academic Dept', 'Faculty', 'Students'],
                content: `
                    <div class="space-y-4">
                        <div class="bg-black text-white p-4 rounded-lg shadow-md mb-6">
                            <h3 class="font-bold text-lg mb-1 flex items-center"><i data-lucide="award" class="mr-2 text-red-500"></i> Official Coursework Status</h3>
                            <p class="text-sm opacity-90">Once the process is complete, Live Projects are officially converted to <strong>Project Based Learning (PBL)</strong> coursework carrying <strong>4 Credits</strong>.</p>
                        </div>

                        <h3 class="text-xl font-bold text-gray-900">10.1 Post-Selection Process</h3>
                        <div class="space-y-3 mt-2">
                             <div class="flex items-start">
                                <div class="bg-red-100 p-2 rounded mr-3 mt-1"><i data-lucide="megaphone" class="w-4 h-4 text-red-800"></i></div>
                                <div>
                                    <h4 class="font-bold text-gray-800">Official Announcement</h4>
                                    <p class="text-sm text-gray-600">The Academic Department officially announces the list of selected students.</p>
                                </div>
                            </div>
                             <div class="flex items-start">
                                <div class="bg-red-100 p-2 rounded mr-3 mt-1"><i data-lucide="clipboard-check" class="w-4 h-4 text-red-800"></i></div>
                                <div>
                                    <h4 class="font-bold text-gray-800">Attendance Monitoring</h4>
                                    <p class="text-sm text-gray-600">Attendance logs of students visiting companies are strictly tracked.</p>
                                </div>
                            </div>
                        </div>

                        <h3 class="text-xl font-bold text-gray-900 mt-6">10.2 Evaluation & Grading</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                            <div class="border border-gray-200 p-4 rounded bg-white">
                                <span class="text-xs font-bold text-red-600 uppercase">Internal</span>
                                <h4 class="font-bold text-gray-900">Viva & Presentations</h4>
                                <p class="text-sm text-gray-600 mt-1">Conducted in-between the project duration to track progress.</p>
                            </div>
                            <div class="border border-gray-200 p-4 rounded bg-white">
                                <span class="text-xs font-bold text-red-600 uppercase">External/Interim</span>
                                <h4 class="font-bold text-gray-900">Final Presentation</h4>
                                <p class="text-sm text-gray-600 mt-1">Interim and External presentations conducted at the end.</p>
                            </div>
                        </div>

                         <div class="bg-red-50 border border-red-200 rounded-lg p-4 mt-6">
                            <h4 class="font-bold text-red-900 flex items-center">
                                <i data-lucide="graduation-cap" class="mr-2 w-5 h-5"></i> Outcomes
                            </h4>
                            <ul class="list-disc pl-8 mt-2 space-y-1 text-sm text-gray-700">
                                <li><strong>Certificate of Completion:</strong> Awarded to students who meet company expectations.</li>
                                <li><strong>Academic Credits:</strong> 4 Credits Coursework.</li>
                                <li><strong>Marks Awarded:</strong> Reflected in the 2nd and 3rd Semesters respectively.</li>
                            </ul>
                        </div>
                    </div>
                `
            },
            {
                id: '11',
                title: '11. Roles & Responsibilities',
                roles: ['All'],
                content: `
                    <div class="space-y-4">
                        <div class="overflow-x-auto">
                          <table class="min-w-full text-sm text-left text-gray-500 border rounded-lg">
                            <thead class="text-xs text-white uppercase bg-red-900">
                              <tr>
                                <th class="px-6 py-3 border-b border-red-800">Role</th>
                                <th class="px-6 py-3 border-b border-red-800">Key Responsibilities</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr class="bg-white border-b hover:bg-red-50">
                                <td class="px-6 py-4 font-medium text-gray-900">SCC Coordinators</td>
                                <td class="px-6 py-4">Scouting (Nashik), Floating Forms, Sorting/Selection, Coordination.</td>
                              </tr>
                              <tr class="bg-gray-50 border-b hover:bg-red-50">
                                <td class="px-6 py-4 font-medium text-gray-900">Faculty Incharge</td>
                                <td class="px-6 py-4">Conducting Interviews, Final Approval of Lists.</td>
                              </tr>
                              <tr class="bg-white border-b hover:bg-red-50">
                                <td class="px-6 py-4 font-medium text-gray-900">Academic Dept</td>
                                <td class="px-6 py-4">Official Announcements, Attendance, Evaluation, Grading (PBL).</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                    </div>
                `
            },
            {
                id: '12',
                title: '12. Timelines',
                roles: ['All'],
                content: `
                    <div class="space-y-4">
                        <div class="p-6 bg-white border border-gray-200 rounded-lg shadow-sm">
                            <h3 class="text-lg font-bold text-gray-900 mb-4 flex items-center">
                               <i data-lucide="calendar" class="mr-2 w-5 h-5 text-red-700"></i> Standard Cycle (Approx 6 Weeks)
                            </h3>
                            <ul class="space-y-4 relative border-l-2 border-gray-200 ml-3">
                                <li class="ml-6">
                                    <span class="absolute -left-2 w-4 h-4 rounded-full bg-red-600 border-2 border-white"></span>
                                    <h4 class="font-bold text-gray-900">Weeks 1-2</h4>
                                    <p class="text-sm text-gray-600">Scouting in Nashik & Onboarding (Charters)</p>
                                </li>
                                <li class="ml-6">
                                    <span class="absolute -left-2 w-4 h-4 rounded-full bg-red-600 border-2 border-white"></span>
                                    <h4 class="font-bold text-gray-900">Week 3</h4>
                                    <p class="text-sm text-gray-600">Floating Interest Forms & Collection</p>
                                </li>
                                <li class="ml-6">
                                    <span class="absolute -left-2 w-4 h-4 rounded-full bg-red-600 border-2 border-white"></span>
                                    <h4 class="font-bold text-gray-900">Week 4</h4>
                                    <p class="text-sm text-gray-600">Faculty Interviews & Segregation</p>
                                </li>
                                <li class="ml-6">
                                    <span class="absolute -left-2 w-4 h-4 rounded-full bg-red-600 border-2 border-white"></span>
                                    <h4 class="font-bold text-gray-900">Week 5</h4>
                                    <p class="text-sm text-gray-600">Final Selection (Top 50-55) & Assignment</p>
                                </li>
                                <li class="ml-6">
                                    <span class="absolute -left-2 w-4 h-4 rounded-full bg-black border-2 border-white"></span>
                                    <h4 class="font-bold text-gray-900">Week 6+</h4>
                                    <p class="text-sm text-gray-600">Handover, PBL Conversion, Evaluation</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                `
            },
            {
                id: '13',
                title: '13. Escalation Matrix',
                roles: ['SCC', 'Faculty'],
                content: `
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 gap-4">
                          <div class="p-4 border rounded-l-4 border-l-green-600 bg-white shadow-sm">
                             <h4 class="font-bold text-gray-800">Level 1: SCC Coordinator</h4>
                             <p class="text-sm text-gray-600 mt-1">Student queries, Form issues, Initial company coordination.</p>
                          </div>
                          <div class="p-4 border rounded-l-4 border-l-yellow-500 bg-white shadow-sm">
                             <h4 class="font-bold text-gray-800">Level 2: Faculty Incharge</h4>
                             <p class="text-sm text-gray-600 mt-1">Interview scheduling conflicts, Company charter issues.</p>
                          </div>
                          <div class="p-4 border rounded-l-4 border-l-red-600 bg-white shadow-sm">
                             <h4 class="font-bold text-gray-800">Level 3: Academic Head / Director</h4>
                             <p class="text-sm text-gray-600 mt-1">Policy violations, Final placement disputes.</p>
                          </div>
                        </div>
                    </div>
                `
            }
        ];

        // --- STATE & INITIALIZATION ---
        let state = {
            activeSection: '1',
            selectedRole: 'All',
            checklistState: JSON.parse(localStorage.getItem('siom_sop_checklist')) || {},
            searchQuery: ''
        };

        const timelineHTML = `
            <div class="p-6 bg-white border border-gray-200 rounded-lg shadow-sm mb-8 print-break-inside">
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                   <i data-lucide="calendar" class="mr-2 w-5 h-5 text-red-700"></i> Live Projects Process
                </h3>
                <div class="flex justify-between items-center text-xs md:text-sm text-center">
                    <div class="flex flex-col items-center w-1/4">
                        <div class="w-8 h-8 rounded-full bg-red-100 text-red-800 flex items-center justify-center font-bold mb-2 border border-red-200">1</div>
                        <span class="text-gray-600">Scout (Nashik)</span>
                    </div>
                    <div class="h-1 bg-gray-200 flex-1"></div>
                     <div class="flex flex-col items-center w-1/4">
                        <div class="w-8 h-8 rounded-full bg-red-100 text-red-800 flex items-center justify-center font-bold mb-2 border border-red-200">2</div>
                        <span class="text-gray-600">Interviews</span>
                    </div>
                    <div class="h-1 bg-gray-200 flex-1"></div>
                     <div class="flex flex-col items-center w-1/4">
                        <div class="w-8 h-8 rounded-full bg-red-100 text-red-800 flex items-center justify-center font-bold mb-2 border border-red-200">3</div>
                        <span class="text-gray-600">Select (Top N)</span>
                    </div>
                    <div class="h-1 bg-gray-200 flex-1"></div>
                     <div class="flex flex-col items-center w-1/4">
                        <div class="w-8 h-8 rounded-full bg-black text-white flex items-center justify-center font-bold mb-2">4</div>
                        <span class="text-gray-600">Academic PBL</span>
                    </div>
                </div>
            </div>
        `;

        function init() {
            renderSidebar();
            renderContent();
            lucide.createIcons();
            
            // Check window size for initial sidebar state
            if(window.innerWidth < 768) {
                document.getElementById('sidebar').classList.add('-translate-x-full');
            }
        }

        // --- CORE LOGIC ---

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            
            if (sidebar.classList.contains('-translate-x-full')) {
                // Open
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
            } else {
                // Close
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
            }
        }

        function setActiveSection(id) {
            state.activeSection = id;
            renderSidebar();
            renderContent();
            
            // Close sidebar on mobile after selection
            if(window.innerWidth < 768) {
                toggleSidebar();
            }

            // Scroll to top
            document.getElementById('document-canvas').scrollTop = 0;
        }

        function updateRole() {
            const selector = document.getElementById('role-selector');
            state.selectedRole = selector.value;
            renderSidebar();
            renderContent(); // Re-render content to show highlights
        }

        function handleSearch() {
            const input = document.getElementById('search-input');
            state.searchQuery = input.value.toLowerCase();
            renderSidebar(); // Update sidebar to filter links
            renderContent(); // Render filtered sections
        }

        function toggleChecklist(taskId, element) {
            // Toggle state
            state.checklistState[taskId] = !state.checklistState[taskId];
            
            // Save to local storage
            localStorage.setItem('siom_sop_checklist', JSON.stringify(state.checklistState));
            
            // UI Update directly for performance
            const isChecked = state.checklistState[taskId];
            const checkboxDiv = element.querySelector('.checklist-box');
            const textSpan = element.querySelector('span');

            if (isChecked) {
                checkboxDiv.classList.add('bg-red-600', 'border-red-600');
                checkboxDiv.classList.remove('border-gray-300');
                checkboxDiv.innerHTML = '<i data-lucide="check" class="text-white w-3 h-3"></i>';
                textSpan.classList.add('text-gray-400', 'line-through');
                textSpan.classList.remove('text-gray-700');
            } else {
                checkboxDiv.classList.remove('bg-red-600', 'border-red-600');
                checkboxDiv.classList.add('border-gray-300');
                checkboxDiv.innerHTML = '';
                textSpan.classList.remove('text-gray-400', 'line-through');
                textSpan.classList.add('text-gray-700');
            }
            lucide.createIcons();
        }

        function exportToText() {
            // Simple logic to create a text file of the SOP
            let text = "SIOM LIVE PROJECTS SOP\n======================\n\n";
            sopData.forEach(section => {
                text += `${section.title}\n----------------\n`;
                // Strip HTML tags for text export
                let tempDiv = document.createElement("div");
                tempDiv.innerHTML = section.content;
                text += tempDiv.textContent || tempDiv.innerText || "";
                text += "\n\n";
            });

            const element = document.createElement('a');
            const file = new Blob([text], {type: 'text/plain'});
            element.href = URL.createObjectURL(file);
            element.download = "SIOM_Live_Projects_SOP.txt";
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }

        // --- RENDERERS ---

        function renderSidebar() {
            const navContainer = document.getElementById('nav-links');
            navContainer.innerHTML = '';

            const filteredSections = getFilteredSections();

            filteredSections.forEach(section => {
                const isActive = state.activeSection === section.id;
                const isRelevant = state.selectedRole === 'All' || section.roles.includes(state.selectedRole) || section.roles.includes('All');
                
                const btn = document.createElement('button');
                btn.className = `w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center justify-between group mb-1 ${isActive ? 'bg-red-50 text-red-700 font-medium' : 'text-gray-600 hover:bg-red-50'} ${!isRelevant ? 'opacity-50' : ''}`;
                btn.onclick = () => setActiveSection(section.id);
                
                let html = `<span class="truncate">${section.title}</span>`;
                if (isRelevant && state.selectedRole !== 'All') {
                    html += `<span class="w-2 h-2 rounded-full bg-red-500"></span>`;
                }
                btn.innerHTML = html;
                navContainer.appendChild(btn);
            });
        }

        function renderContent() {
            const contentContainer = document.getElementById('content-area');
            const timelineContainer = document.getElementById('timeline-container');
            
            contentContainer.innerHTML = '';
            
            // Filter logic
            const sectionsToRender = state.searchQuery 
                ? getFilteredSections() // Show all matching sections if searching
                : sopData.filter(s => s.id === state.activeSection); // Show only active if not searching
            
            // Logic to show timeline only on intro page
            if (state.activeSection === '1' && !state.searchQuery) {
                timelineContainer.innerHTML = timelineHTML;
                timelineContainer.classList.remove('hidden');
            } else {
                timelineContainer.innerHTML = '';
                timelineContainer.classList.add('hidden');
            }

            if (sectionsToRender.length === 0) {
                contentContainer.innerHTML = `
                    <div class="text-center py-20 text-gray-500">
                        <i data-lucide="search" class="mx-auto mb-4 text-gray-300 w-12 h-12"></i>
                        <p class="text-lg">No sections found matching "${state.searchQuery}"</p>
                        <button onclick="document.getElementById('search-input').value=''; handleSearch();" class="mt-4 text-red-600 hover:underline">Clear search</button>
                    </div>
                `;
                lucide.createIcons();
                return;
            }

            sectionsToRender.forEach(section => {
                const isRelevant = state.selectedRole === 'All' || section.roles.includes(state.selectedRole) || section.roles.includes('All');
                
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'mb-12 scroll-mt-24 transition-opacity duration-300 animate-fadeIn';
                
                // Process content for interactive checklists
                let processedContent = section.content;
                
                // Header
                let headerHTML = `
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 border-l-4 border-red-600 pl-4">
                            ${section.title}
                        </h2>
                        ${isRelevant && state.selectedRole !== 'All' ? '<span class="text-xs font-bold px-2 py-1 bg-red-100 text-red-700 rounded uppercase">Relevant to you</span>' : ''}
                    </div>
                `;

                sectionDiv.innerHTML = headerHTML + processedContent;
                
                // Navigation Footer (Only if not searching)
                if (!state.searchQuery) {
                    const currentIndex = sopData.findIndex(s => s.id === section.id);
                    const prevSection = sopData[currentIndex - 1];
                    const nextSection = sopData[currentIndex + 1];

                    let footerHTML = `<div class="mt-12 pt-6 border-t border-gray-200 flex justify-between text-sm text-gray-500 no-print">`;
                    
                    if (prevSection) {
                        footerHTML += `<button onclick="setActiveSection('${prevSection.id}')" class="hover:text-red-600 flex items-center transition-colors">Previous Section</button>`;
                    } else {
                        footerHTML += `<span></span>`;
                    }

                    if (nextSection) {
                        footerHTML += `<button onclick="setActiveSection('${nextSection.id}')" class="hover:text-red-600 flex items-center transition-colors">Next Section <i data-lucide="chevron-right" class="ml-1 w-4 h-4"></i></button>`;
                    }

                    footerHTML += `</div>`;
                    sectionDiv.innerHTML += footerHTML;
                }

                // Append to container
                contentContainer.appendChild(sectionDiv);
                
                // Post-process: Convert list items with data-task to interactive elements
                const tasks = sectionDiv.querySelectorAll('li[data-task]');
                tasks.forEach(li => {
                    const taskId = li.getAttribute('data-task');
                    const isChecked = state.checklistState[taskId];
                    const text = li.innerHTML;
                    
                    li.className = "flex items-start p-2 hover:bg-gray-50 rounded transition-colors group cursor-pointer checklist-item";
                    li.innerHTML = `
                        <div class="checklist-box mt-1 mr-3 flex-shrink-0 w-5 h-5 border-2 rounded flex items-center justify-center transition-colors ${isChecked ? 'bg-red-600 border-red-600' : 'border-gray-300 group-hover:border-red-400'}">
                            ${isChecked ? '<i data-lucide="check" class="text-white w-3 h-3"></i>' : ''}
                        </div>
                        <span class="${isChecked ? 'text-gray-400 line-through' : 'text-gray-700'}">${text}</span>
                    `;
                    li.onclick = (e) => {
                        e.stopPropagation(); // Prevent bubbling issues
                        toggleChecklist(taskId, li);
                    };
                });
            });

            lucide.createIcons();
        }

        function getFilteredSections() {
            if (!state.searchQuery) return sopData;
            return sopData.filter(section => 
                section.title.toLowerCase().includes(state.searchQuery) || 
                section.content.toLowerCase().includes(state.searchQuery)
            );
        }

        // Initialize on Load
        document.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
